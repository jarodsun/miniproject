# **项目名称：简易CRM及进销存分析系统 - Web前端应用**

## **1. 项目概述**

本系统是一个基于 Next.js 15 + Material-UI 的现代化 Web 前端应用，为用户提供一个轻量级的客户管理（CRM）与进销存（Inventory）解决方案。核心功能包括用户认证、货品出入库管理和基于历史数据的商家采购行为分析，帮助用户预测未来销售旺季。

## **2. 核心功能模块**

### **模块零：用户认证系统 (User Authentication)**

#### **0.1 用户登录 (User Login)**
*   **功能描述：** 用户通过用户名和密码进行系统登录。
*   **具体需求：**
    *   **登录界面：** 提供简洁美观的登录表单，包含用户名和密码输入框。
    *   **表单验证：** 对用户名和密码进行必填验证。
    *   **登录验证：** 验证用户凭据的有效性。
    *   **记住我功能：** 用户可选择记住登录状态，下次访问时自动登录。
    *   **忘记密码：** 提供忘记密码功能，支持密码重置。
    *   **登录状态管理：** 登录成功后跳转到系统主界面，未登录用户重定向到登录页。
    *   **安全退出：** 提供安全退出功能，清除用户会话。

#### **0.2 用户界面设计**
*   **功能描述：** 提供现代化的用户界面体验。
*   **具体需求：**
    *   **响应式设计：** 支持桌面端和移动端访问。
    *   **主题切换：** 支持明暗主题切换。
    *   **Material Design：** 采用 Material-UI 设计规范。
    *   **无障碍访问：** 支持键盘导航和屏幕阅读器。

### **模块一：基础信息管理**

#### **1.1 货品管理 (Product Management)**
*   **功能描述：** 统一管理所有货品信息。
*   **具体需求：**
    *   **添加货品：** 录入新品信息，如货品名称、规格、单位（如：个、箱）、初始库存等。
    *   **查看货品列表：** 展示所有货品的列表，包含当前库存数量。
    *   **修改货品信息：** 编辑已存在的货品信息。
    *   **删除货品：** 删除不再使用的货品。
    *   **上传图片：** 为每个货品上传一张或多张图片，用于展示。此功能将通过专门的图片上传 API 实现。
    *   **搜索筛选：** 支持按货品名称、规格等条件搜索和筛选。

#### **1.2 商家管理 (Merchant Management)**
*   **功能描述：** 统一管理所有合作商家的信息。
*   **具体需求：**
    *   **添加商家：** 录入新商家的信息，如商家名称、联系人、联系电话等。
    *   **查看商家列表：** 展示所有商家的列表。
    *   **修改商家信息：** 编辑已存在的商家信息。
    *   **删除商家：** 删除不再合作的商家。
    *   **搜索筛选：** 支持按商家名称、联系人等条件搜索和筛选。

### **模块二：出入库管理 (Inventory Transactions)**

#### **2.1 入库功能 (Stock-in)**
*   **功能描述：** 记录货品进入仓库的操作。
*   **具体需求：**
    *   创建入库单：选择要入库的`货品`，填写`数量`和`日期`。
    *   完成后，对应货品的`当前库存`会自动增加。
    *   **批量入库：** 支持一次选择多个货品进行入库操作。
    *   **入库历史：** 查看所有入库记录，支持按日期、货品等条件筛选。

#### **2.2 出库功能 (Stock-out)**
*   **功能描述：** 记录货品从仓库发出给指定商家的操作。
*   **具体需求：**
    *   创建出库单：选择要出库的`货品`，填写`数量`和`日期`。
    *   **关键点：** 必须关联一个`商家`，以记录该批货物发往何处。
    *   完成后，对应货品的`当前库存`会自动减少。
    *   **库存检查：** 出库前检查库存是否充足，防止超量出库。
    *   **批量出库：** 支持一次选择多个货品进行出库操作。

#### **2.3 库存流水查看**
*   **功能描述：** 提供所有出入库历史记录的查询。
*   **具体需求：**
    *   可以按日期、货品、商家、类型（出库/入库）等条件筛选和查看所有历史记录。
    *   **数据导出：** 支持将库存流水数据导出为 Excel 或 CSV 格式。
    *   **实时更新：** 库存数据实时更新，确保数据准确性。

### **模块三：销售分析与预测 (Sales Analysis & Prediction)**

#### **3.1 商家年度采购趋势分析**
*   **功能描述：** 以商家的维度，用图表形式展示该商家近一年的进货（出库）情况，并分析其采购规律。
*   **核心需求：**
    *   **数据统计：** 系统能够按`商家`和`月份`对所有`出库记录`进行汇总。
    *   **报表生成：**
        *   用户选择一个`商家`。
        *   系统生成一份**图表**（如柱状图或折线图），展示该商家在**过去12个月**（近一年）的每月总采购数量。
        *   **数据洞察：** 通过此图表，用户可以直观地看到该商家在不同月份的采购量变化趋势，识别出采购高峰期，从而预测其未来的大宗进货需求。
        *   **高亮显示：** 在图表中，自动高亮或标记出采购量远超平均水平的月份，将其识别为"大量进货需求"月份。

#### **3.2 库存预警系统**
*   **功能描述：** 基于历史数据分析，提供库存预警功能。
*   **具体需求：**
    *   **低库存预警：** 当货品库存低于设定阈值时，系统自动提醒。
    *   **采购建议：** 根据历史销售数据，建议采购数量和时机。
    *   **趋势预测：** 基于历史数据预测未来销售趋势。

### **模块四：系统管理 (System Management)**

#### **4.1 用户管理**
*   **功能描述：** 管理系统用户账户。
*   **具体需求：**
    *   **用户注册：** 支持新用户注册功能。
    *   **用户信息管理：** 用户可以修改个人信息。
    *   **权限管理：** 不同用户角色具有不同的系统权限。

#### **4.2 系统设置**
*   **功能描述：** 提供系统配置和个性化设置。
*   **具体需求：**
    *   **主题设置：** 用户可以选择喜欢的界面主题。
    *   **语言设置：** 支持多语言界面切换。
    *   **通知设置：** 用户可以自定义系统通知偏好。

## **3. 技术架构**

### **3.1 前端技术栈**
*   **框架：** Next.js 15 (App Router)
*   **UI 库：** Material-UI v7
*   **样式：** Emotion + Tailwind CSS
*   **状态管理：** React Context + Hooks
*   **图表库：** @mui/x-charts
*   **数据网格：** @mui/x-data-grid
*   **日期处理：** dayjs

### **3.2 数据模型（设想）**

为实现以上功能，系统至少需要以下几个核心数据表：

1.  **用户表 (Users):**
    *   `用户ID`, `用户名`, `密码`, `邮箱`, `创建时间`, `最后登录时间`, `角色`

2.  **货品表 (Products):**
    *   `货品ID`, `名称`, `规格`, `当前库存`, `图片URL`, `创建时间`, `更新时间`

3.  **商家表 (Merchants):**
    *   `商家ID`, `名称`, `联系人`, `电话`, `地址`, `创建时间`, `更新时间`

4.  **出入库记录表 (Transactions):**
    *   `记录ID`, `货品ID` (关联货品表), `类型` (出库/入库), `数量`, `操作日期`, `商家ID` (关联商家表，入库时可为空), `操作人ID` (关联用户表)

5.  **用户会话表 (User Sessions):**
    *   `会话ID`, `用户ID`, `登录时间`, `过期时间`, `设备信息`

## **4. 用户界面设计规范**

### **4.1 设计原则**
*   **简洁性：** 界面简洁明了，操作流程清晰。
*   **一致性：** 统一的视觉语言和交互模式。
*   **响应性：** 适配不同设备和屏幕尺寸。
*   **可访问性：** 支持无障碍访问。

### **4.2 页面结构**
*   **登录页：** 简洁的登录表单，支持主题切换。
*   **主界面：** 侧边导航 + 主内容区域布局。
*   **数据展示：** 使用表格、图表等组件展示数据。
*   **表单页面：** 统一的表单设计规范。

## **5. 安全要求**

### **5.1 认证安全**
*   **密码加密：** 用户密码必须加密存储。
*   **会话管理：** 实现安全的用户会话管理。
*   **登录保护：** 防止暴力破解攻击。

### **5.2 数据安全**
*   **数据验证：** 所有用户输入必须进行验证。
*   **权限控制：** 不同用户只能访问授权功能。
*   **数据备份：** 重要数据需要定期备份。

## **6. 性能要求**

### **6.1 响应时间**
*   **页面加载：** 首屏加载时间 < 3秒
*   **数据查询：** 数据查询响应时间 < 2秒
*   **用户交互：** 用户操作响应时间 < 1秒

### **6.2 并发支持**
*   **多用户：** 支持多用户同时在线操作。
*   **数据一致性：** 确保多用户操作时数据的一致性。

---

**文档版本：** v1.0  
**创建日期：** 2025年10月5日
**最后更新：** 2025年10月5日
